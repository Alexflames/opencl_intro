\documentclass[pdf, intlimits, unicode, S6, presentation]{beamer}
\usepackage[T2A]{fontenc}
\usepackage[cp1251]{inputenc}
\usepackage[english,russian]{babel}

\usetheme{Warsaw}
\usefonttheme[onlysmall]{structurebold}
\usefonttheme[onlymath]{serif}
\setbeamercovered{dynamic}
\setbeamercovered{transparent}
\setbeamerfont{institute}{size=\normalsize}
%\setbeamertemplate{background canvas}[vertical shading][bottom=red!10,top=blue!10]
\setbeamertemplate{theorems}[unnumbered]
\setbeamertemplate{footline}{}
\setbeamertemplate{headline}{}
\setbeamercolor{bluetext_color}{fg=blue}
\newcommand{\bluetext}[1]{{\usebeamercolor[fg]{bluetext_color}#1}}

\usepackage{beamerthemesplit}
\usepackage{dsfont}
\usepackage{pgfplots}
%\usepackage{graphics}

\newcounter{sli}
\newcommand{\slnumber}{\hfill {\color{lightgray} \refstepcounter{sli}\arabic{sli}}}

%\pgfplotsset{compat=1.16}

\title[ФЯиГ]
{Вычисления на видеокартах}
\author{Курсовая работа \\
    студента 351 группы А.~А.~Григорьева}
\institute{{Саратовский государственный университет} \\
    им.~Н.~Г.~Чернышевского \\[5pt]
Кафедра математической кибернетики\\ и компьютерных наук\\[5pt]
Научный руководитель: доцент Семенов~М.~С.
}
\date{2019г.}


\begin{document}

% Титульный лист - обязательный слайд
\begin{frame}
    \titlepage
\end{frame}

% Постановка задачи - обязательный слайд
\begin{frame}
    \frametitle{Постановка задачи \slnumber}
    \begin{columns}
      \begin{column}{6cm}\centering
          \includegraphics[scale=0.3]{screenshots/cpu-gpu-performance}
          
      \end{column}
      \begin{column}{5cm}
          \includegraphics[scale=0.13]{screenshots/flops}
      \end{column}
    \end{columns}
\end{frame}

\begin{frame}
    \frametitle{Постановка задачи \slnumber}
    \Large
    \begin{enumerate}
        \item Понять, какие алгоритмы эффективнее исполнять на видеокартах;
        \item Изучить типовую архитектуру видеокарты, научиться оптимизировать алгоритмы;
        \item Получить практический опыт разработки программ на видеокартах
        с помощью OpenCL;
        \item Провести исследование производительности параллельных программ на
        различных видеокартах.
    \end{enumerate}
\end{frame}

% Описание курсовой работы
\begin{frame}
    \frametitle{Главное отличие видеокарты от процессора \slnumber}
    \Large
    Центральный процессор "--- небольшое количество <<умных>> ядер
    
    \vspace{1em}
    
    Видеокарта "--- большое количество <<простых>> ядер
\end{frame}

\begin{frame}
    \frametitle{Особенности видеокарты \slnumber}
    \Large
    Выделяют следующие особенности вычислительных устройств в видеокарте:
    \begin{enumerate}
    	\item массовый параллелизм; 
    	\item единый указатель на инструкции;
    	\item быстрое обращение к локальной и регистровой памяти;
    	\item медленное обращение к <<глобальной>> памяти;
    \end{enumerate}
\end{frame}

\begin{frame}
    \frametitle{Особенности алгоритмов на видеокарте \slnumber}
    \Large
    При разработке алгоритмов стоит учитывать:
    \begin{enumerate}
    	\item разбиение на рабочие группы, минимальная синхронизация между ними; 
    	\item сокрытие задержки при обращении к памяти в рабочих группах;
    	\item правильное ветвление;
    	\item использование локальной памяти и регистров для быстрого доступа к памяти;
    \end{enumerate}
\end{frame}

\begin{frame}
    \frametitle{Задачи \slnumber}
    \Large
    Создана хостовая часть программы и kernel для выполнения следующих алгоритмов:
    \begin{enumerate}
    	\item сумма двух векторов;
    	\item нахождение максимальной суммы на префиксе массива;
    	\item транспонирование матрицы*;
    	\item умножение матриц*.
    \end{enumerate}
    
    \normalsize
    * "--- реализованы обычные и эффективные версии kernel.
\end{frame}

\begin{frame}
    \frametitle{Сумма двух векторов \slnumber}
    \Large
    Дано: массивы A, B из N чисел
    \vspace{1em}
    
    Задача: заполнить результирующий массив N поэлементными суммами векторов A, B
    \vspace{1em}
    
    Решение демонстрирует базовые возможности программирования с помощью OpenCL
\end{frame}

\begin{frame}
    \frametitle{Максимальная префиксная сумма \slnumber}
    \Large
    Дано: массив A из N целых чисел
    \vspace{1em}
    
    Задача: найти максимальную сумму на префиксах массива A
    \vspace{1em}
    
    Для решения используется локальная память, барьеры, рекурсивное выполнение kernel
\end{frame}

\begin{frame}
    \frametitle{Транспонирование матрицы \slnumber}
    \Large
    Дано: матрица A размерности $N\times M$
    \vspace{1em}
    
    Задача: найти транспонированную матрицу $A^T$
    \vspace{1em}
    
    Решена двумя способами:
    \begin{enumerate}
     	\item Простой "--- N доступов к глобальной памяти для вычисления N элементов;
     	\item Эффективный "--- $2\times N$ доступов к <<глобальной>> памяти для вычисления $N^2$ элементов
     	за счет использования локальной памяти
    \end{enumerate}
\end{frame}

\begin{frame}
    \frametitle{Оптимизированное транспонирование матрицы \slnumber}
    \Large
    \begin{figure} 
        \includegraphics[scale=0.6]{screenshots/tile-transpose}
        \caption{Транспонирование матрицы с использованием <<плиток>> в локальной памяти}
    \end{figure}
\end{frame}

\begin{frame}
    \frametitle{Умножение матриц \slnumber}
    \Large
    Дано: матрица A размерности $N\times K$, матрица B размерности $K\times M$
    \vspace{1em}
    
    Задача: найти матрицу C "--- произведение матриц A и B
    \vspace{1em}
    
    Решена двумя способами:
    \begin{enumerate}
     	\item Простой "--- $N^3$ доступов к глобальной памяти для вычисления $N^2$ элементов;
     	\item Эффективный "--- $3\times N$ доступов к <<глобальной>> памяти для вычисления $N^2$ элементов
     	за счет использования локальной памяти
    \end{enumerate}
\end{frame}

\begin{frame}
    \frametitle{Оптимизированное умножение матриц \slnumber}
    \Large
    \begin{figure} 
        \includegraphics[scale=0.45]{screenshots/matmul-smart}
        \caption{Транспонирование матрицы с использованием <<плиток>> в локальной памяти}
    \end{figure}
\end{frame}

\begin{frame}
    \frametitle{Сравнение производительности алгоритмов \slnumber}
    \begin{table}[h]
	   	\centering
	   	\tiny
	   	\begin{tabular}{|c|c|c|c|}
	   			\hline Устройство  & Алгоритм & Размер р.группы/данных & Время работы, мкс \\
					\hline NVIDIA Geforce 1050 Ti & Сумма векторов & 1/2097152 & 25026 \\
					\hline NVIDIA Geforce 560 Ti & Сумма векторов & 1/2097152 & 44150 \\
					\hline NVIDIA Geforce 1050 Ti & Сумма векторов & 128/2097152 & 14345 \\
					\hline NVIDIA Geforce 560 Ti & Сумма векторов & 128/2097152 & 29097 \\
	   			\hline NVIDIA Geforce 1050 Ti & Макс. префикс & 128/2097152 & 17345 \\
	   			\hline NVIDIA Geforce 560 Ti & Макс. префикс & 128/2097152 & 32097 \\
					\hline NVIDIA Geforce 1050 Ti & О. транспонирование & $32\times32$/$4096\times2048$ & 21648 \\
					\hline NVIDIA Geforce 560 Ti & О. транспонирование & $32\times32$/$4096\times2048$ & 36519 \\
					\hline NVIDIA Geforce 1050 Ti & Умножение матриц & $1\times1$ & 577230 \\
					\hline NVIDIA Geforce 560 Ti & Умножение матриц & $1\times1$ & 1274058 \\
					\hline NVIDIA Geforce 1050 Ti & О. Умножение матриц & $K\times16$ & 27290 \\
					\hline NVIDIA Geforce 560 Ti & О. Умножение матриц & $K\times16$ & 49821 \\
	   			\hline
	   	\end{tabular}
    \end{table}
\end{frame}

% Описание результатов курсовой работы - обязательный слайд
\begin{frame}
    \frametitle{Итог  \slnumber}
    \Large
    В результате курсовой работы:
    \begin{enumerate}
        \item изучены особенности программирования на видеокартах с использованием OpenCL;
        \item рассмотрены возможности оптимизации алгоритмов на видеокартах;
        \item проведены вычисления для разных конфигураций рабочих групп, возможных алгоритмов и видеокарт.
    \end{enumerate}    
\end{frame}



% Выводы и перспектива дальнейшей работы - необязательно
%\begin{frame}
%    \frametitle{Возможные дальнейшие улучшения \slnumber}
%    \Large
%    \begin{enumerate}
%        \item Программный код контракта можно модифицировать для выполнения 
%        реальной задачи;
%        \item Имеется возможность связать смарт"=контракт с внешней 
%        инфраструктурой посредством создания сайта или приложения.
%    \end{enumerate}
%\end{frame}


% список литературы - обязательно
\begin{frame}
    \frametitle{Список использованных источников  \slnumber}
    \small
    \begin{thebibliography}{9}
        \setbeamertemplate{bibliography item}[online]
        \bibitem{fermi}
            \verb"https://www.nvidia.com/content/PDF/fermi-white-papers/"
            \newblock NVIDIA’s Next Generation CUDA Compute Architecture: Fermi
        \setbeamertemplate{bibliography item}[book]
        \bibitem{opencl-guide}
        		A.~Munshi, B.~R.~Gaster, T.~G.~Mattson, J.~Fung, D.~Ginsburg
            \newblock OpenCL Programming Guide
            \newblock Ann Arbor, Michigan: 2012.
        \setbeamertemplate{bibliography item}[online]
        \bibitem{opencl-intro}
            \verb"http://opencl.ru/node/8"
            \newblock Введение | OpenCL
        \setbeamertemplate{bibliography item}[online]    
				\bibitem{opencl-spec}
            \verb"https://www.khronos.org/registry/OpenCL/specs/"
            \newblock The OpenCL Specification
    \end{thebibliography}
\end{frame}

\begin{frame}
    \frametitle{Список использованных источников  \slnumber}
    \small
    \begin{thebibliography}{9}
        \setbeamertemplate{bibliography item}[online]    
				\bibitem{videocard-architecture}
            \verb"https://compscicenter.ru/courses/video-cards-computation/"
            \newblock Введение в OpenCL. Архитектура видеокарты  
        \setbeamertemplate{bibliography item}[online]    
				\bibitem{warps}
            \verb"https://docs.nvidia.com/gameworks/content/developertools/"
            \newblock Achieved Occupancy
				\setbeamertemplate{bibliography item}[online]    
				\bibitem{work-groups}
            \verb"https://software.intel.com/ru-ru/articles/"
            \newblock Неоднородные рабочие группы OpenCL 2.0  
        \setbeamertemplate{bibliography item}[online]    
				\bibitem{enqueue}
            \verb"https://www.khronos.org/registry/OpenCL/sdk/1.0/docs/"
            \newblock clEnqueueNDRangeKernel  
    \end{thebibliography}
\end{frame}

\begin{frame}
    \frametitle{Список использованных источников  \slnumber}
    \small
    \begin{thebibliography}{9}
        \setbeamertemplate{bibliography item}[online]    
				\bibitem{matmul}
            \verb"https://compscicenter.ru/courses/video-cards-computation/"
            \newblock Умножение матриц | Вычисления на видеокартах  
        \setbeamertemplate{bibliography item}[online]    
				\bibitem{performance}
            \verb"https://www.karlrupp.net/2016/08/flops-per-cycle-for"
            \newblock FLOPs per Cycle for CPUs, GPUs and Xeon Phis
    \end{thebibliography}
\end{frame}

\begin{frame}
	\begin{beamercolorbox}[ht=7ex, dp=4ex, center, shadow=true, rounded=true]{title in head/foot}
	\centerline{\LARGE{СПАСИБО ЗА ВНИМАНИЕ!}}
	\end{beamercolorbox}
\end{frame}

\end{document} 